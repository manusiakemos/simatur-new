(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{309:function(e,s,t){"use strict";t.r(s);var a={props:["value"],computed:{file:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{handleFileUpload:function(){this.file=this.$refs.file.files[0]}}},r=t(1),o={components:{UploadFile:Object(r.a)(a,(function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"large-12 medium-12 small-12 cell"},[s("label",[this._v("File\n        "),s("input",{ref:"file",attrs:{type:"file",id:"file"},on:{change:this.handleFileUpload}})])])}),[],!1,null,null,null).exports},computed:{userData:function(){return this.$store.state.auth.data}},mounted:function(){this.user=this.userData},methods:{updateProfile:function(){var e=this;this.loading=!0,this.axios.put(this.user.links.update,this.user).then((function(s){var t=s.data;s.data.status&&(e.$store.commit("setAuthData",t),e.loading=!1,e.errors=[],e.$message({type:s.data.text,message:s.data.message}))})).catch((function(s){e.errors=s.response.data.errors})),this.loading=!1},onSuccessUpload:function(){var e=this;this.axios.get("/api/profile").then((function(s){e.$store.commit("setAuthData",s.data),e.makeToast("Avatar berhasil diupdate")}))},showModalUpload:function(){this.show_modal=!0},submitFile:function(){var e=this,s=new FormData;s.append("file",this.file),this.axios.post("/api/profile/avatar",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(s){e.onSuccessUpload()})).catch((function(s){e.makeToast(s)}))}},data:function(){return{items:[{text:"Admin",href:"#"},{text:"Manage",href:"#"},{text:"Library",active:!0}],user:"",errors:[],loading:!1,modal_title:"Change Avatar",show_modal:!1,headers:{"X-XSRF-TOKEN":getCookie("XSRF-TOKEN")},file:""}}},i=Object(r.a)(o,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("b-breadcrumb",{staticClass:"bg-white shadow-sm",attrs:{items:e.items}}),e._v(" "),t("b-card",{staticClass:"shadow",attrs:{"border-variant":"light"}},[t("div",{staticClass:"d-lg-flex d-lg-inline-block"},[t("div",{staticClass:"d-block mb-2 p-4 d-flex justify-content-center",on:{click:e.showModalUpload}},[t("div",{staticClass:"wrapper-avatar"},[t("b-img-lazy",{attrs:{src:e.userData.avatar,width:"300",height:"300"}}),e._v(" "),t("div",{staticClass:"avatar-overlay d-flex justify-content-center align-items-center"},[t("span",{staticClass:"fa fa-plus fa-4x text-white"})])],1)]),e._v(" "),t("div",{staticClass:"d-block ml-3 w-100 pr-4"},[t("b-form-group",{attrs:{id:"username-group",label:"Username","label-for":"username","invalid-feedback":this.errors&&this.errors.username?this.errors.username.join():"",state:!this.errors||!this.errors.username}},[t("b-form-input",{attrs:{id:"username"},model:{value:e.user.username,callback:function(s){e.$set(e.user,"username",s)},expression:"user.username"}})],1),e._v(" "),t("b-form-group",{attrs:{id:"name-group",label:"Name","label-for":"name","invalid-feedback":this.errors&&this.errors.name?this.errors.name.join():"",state:!this.errors||!this.errors.name}},[t("b-form-input",{attrs:{id:"name"},model:{value:e.user.name,callback:function(s){e.$set(e.user,"name",s)},expression:"user.name"}})],1),e._v(" "),t("b-form-group",{attrs:{id:"phone-group",label:"Phone","label-for":"phone","invalid-feedback":this.errors&&this.errors.phone?this.errors.phone.join():"",state:!this.errors||!this.errors.phone}},[t("b-form-input",{attrs:{id:"phone"},model:{value:e.user.phone,callback:function(s){e.$set(e.user,"phone",s)},expression:"user.phone"}})],1),e._v(" "),t("b-form-group",{attrs:{id:"email-group",label:"Email","label-for":"email","invalid-feedback":this.errors&&this.errors.email?this.errors.email.join():"",state:!this.errors||!this.errors.email}},[t("b-form-input",{attrs:{id:"email",type:"email"},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}})],1),e._v(" "),t("b-form-group",{attrs:{id:"password-group",label:"Password","label-for":"password","invalid-feedback":this.errors&&this.errors.password?this.errors.password.join():"",state:!this.errors||!this.errors.password}},[t("b-form-input",{attrs:{id:"password",type:"password",autocomplete:"new-password"},model:{value:e.user.password,callback:function(s){e.$set(e.user,"password",s)},expression:"user.password"}})],1),e._v(" "),t("b-form-group",{attrs:{id:"password_confirmation-group",label:"Password Confirmation","label-for":"password_confirmation","invalid-feedback":this.errors&&this.errors.password_confirmation?this.errors.password_confirmation.join():"",state:!this.errors||!this.errors.password_confirmation}},[t("b-form-input",{attrs:{id:"password_confirmation",type:"password"},model:{value:e.user.password_confirmation,callback:function(s){e.$set(e.user,"password_confirmation",s)},expression:"user.password_confirmation"}})],1),e._v(" "),t("div",{staticClass:"mt-5"},[t("b-btn",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:e.updateProfile}},[e._v("Update Profile\n                        ")])],1)],1)])]),e._v(" "),t("b-modal",{attrs:{"no-header":""},scopedSlots:e._u([{key:"modal-footer",fn:function(s){s.ok,s.cancel,s.hide;return[t("b-button",{attrs:{variant:"primary"},on:{click:function(s){e.show_modal=!1}}},[e._v("\n                    Tutup\n                ")]),e._v(" "),t("b-button",{attrs:{variant:"primary"},on:{click:function(s){return e.submitFile()}}},[e._v("\n                    Upload\n                ")])]}}]),model:{value:e.show_modal,callback:function(s){e.show_modal=s},expression:"show_modal"}},[t("upload-file",{model:{value:e.file,callback:function(s){e.file=s},expression:"file"}})],1)],1)])}),[],!1,null,null,null);s.default=i.exports}}]);