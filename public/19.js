(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{234:function(t,e,a){"use strict";var s=a(31);a.n(s).a},235:function(t,e,a){(t.exports=a(12)(!1)).push([t.i,"\n#abs[data-v-acb2f83a] {\n    position: fixed;\n    top: 80px;\n    z-index: 666;\n}\nbody[data-v-acb2f83a] {\n    overflow: hidden !important;\n}\n",""])},31:function(t,e,a){var s=a(235);"string"==typeof s&&(s=[[t.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(13)(s,n);s.locals&&(t.exports=s.locals)},332:function(t,e,a){"use strict";a.r(e);var s={name:"Backbone",watch:{"stageSize.width":function(t){this.stageSize.width=parseInt(t)},"stageSize.height":function(t){this.stageSize.height=parseInt(t)}},created:function(){this.getData()},data:function(){return{stageSize:{width:0,height:0,scaleX:.1,scaleY:.1,rectangles:[]},selectedShapeName:"",show:!1}},methods:{handleTransformEnd:function(t){var e=this,a=this.stageSize.rectangles.find((function(t){return t.name===e.selectedShapeName}));a.x=t.target.x(),a.y=t.target.y(),a.rotation=t.target.rotation(),a.scaleX=t.target.scaleX(),a.scaleY=t.target.scaleY()},handleStageMouseDown:function(t){if(console.log("handleStageMouseDown"),t.target===t.target.getStage())return this.selectedShapeName="",void this.updateTransformer();if(!("Transformer"===t.target.getParent().className)){var e=t.target.name(),a=this.stageSize.rectangles.find((function(t){return t.name===e}));this.selectedShapeName=a?e:"",this.updateTransformer(),this.updateData(t.target)}},updateTransformer:function(){console.log("updateTransformer");var t=this.$refs.transformer.getNode(),e=t.getStage(),a=this.selectedShapeName,s=e.findOne("."+a);s!==t.node()&&(s?t.nodes([s]):t.nodes([]),t.getLayer().batchDraw())},getData:function(){var t=this;this.axios.get("/api/backbone").then((function(e){t.stageSize=e.data,t.show=!0}))},updateData:function(t){var e=t.attrs;e.draggable=!0;var a=_.findIndex(this.stageSize.rectangles,(function(t){return t.name==e.name}));this.stageSize.rectangles[a]=e},handleDragEnd:function(t){var e=t.target.attrs;e.draggable=!0;this.stageSize.rectangles.find((function(t){return t.name===e.name}))},simpan:function(){var t=this;this.axios.post("/api/backbone",{json:this.stageSize}).then((function(e){t.makeToast(e.data.text,e.data.message)}))},add:function(t){var e;if(0==this.stageSize.rectangles.length)var a=1;else a=_.maxBy(this.stageSize.rectangles,(function(t){return t.id})).id+1;var s="shape-"+a;switch(t){case"circle":e={id:a,name:s,shape:t,rotation:0,x:10,y:10,width:100,height:100,scaleX:1,scaleY:1,fill:"#5d6ce0",draggable:!0,offsetX:0,offsetY:0,skewX:0,skewY:0};break;case"text":e={id:a,"z-index":666,name:s,fill:"#333333",shape:t,rotation:0,x:10,y:10,draggable:!0,text:"Some text on canvas",fontSize:15};break;case"rect":e={id:a,name:s,shape:t,draggable:!0,fill:"#dc266e",rotation:0,x:10,y:10,width:100,height:100,scaleX:1,scaleY:1,offsetX:0,offsetY:0,skewX:0,skewY:0};break;case"line":e={id:a,name:s,shape:t,draggable:!0,x:20,y:200,points:[0,0,100,0],tension:0,closed:!0,stroke:"black",fill:"#333333"}}e?this.stageSize.rectangles.push(e):console.log("x is not defined")},deleteShape:function(t){this.stageSize.rectangles.splice(t,1)}}},n=(a(234),a(1)),i=Object(n.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("b-breadcrumb",[a("b-breadcrumb-item",{attrs:{to:"/admin/dashboard"}},[t._v("\n                        Home\n                    ")]),t._v(" "),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Backbone")])],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"py-3 pr-3 pl-3 shadow"},[a("b-btn",{staticClass:"m-1",on:{click:t.simpan}},[t._v("Simpan")]),t._v(" "),a("b-btn",{staticClass:"m-1",on:{click:t.getData}},[t._v("Refresh")]),t._v(" "),a("b-input",{staticClass:"m-1",attrs:{type:"number",placeholder:"height"},model:{value:t.stageSize.height,callback:function(e){t.$set(t.stageSize,"height",e)},expression:"stageSize.height"}}),t._v(" "),a("b-input",{staticClass:"m-1",attrs:{type:"number",placeholder:"width"},model:{value:t.stageSize.width,callback:function(e){t.$set(t.stageSize,"width",e)},expression:"stageSize.width"}}),t._v(" "),a("b-btn",{staticClass:"m-1",on:{click:function(e){return t.add("circle")}}},[t._v("Lingkaran")]),t._v(" "),a("b-btn",{staticClass:"m-1",on:{click:function(e){return t.add("rect")}}},[t._v("Persegi")]),t._v(" "),a("b-btn",{staticClass:"m-1",on:{click:function(e){return t.add("line")}}},[t._v("Garis")]),t._v(" "),a("b-btn",{staticClass:"m-1",on:{click:function(e){return t.add("text")}}},[t._v("Text")]),t._v(" "),t._l(t.stageSize.rectangles,(function(e,s){return a("b-card",{key:s,staticClass:"shadow-sm mb-3",attrs:{"no-title":""}},[a("div",{staticClass:"d-flex align-text-bottom justify-content-between"},[a("span",{staticClass:"display-5"},[t._v(t._s(e.shape)+t._s(e.id))]),t._v(" "),a("b-btn",{attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.deleteShape(s)}}},[a("span",{staticClass:"fa fa-trash-alt"})])],1),t._v(" "),"text"==e.shape?a("b-form-group",{staticClass:"mt-3"},[a("b-input",{model:{value:e.text,callback:function(a){t.$set(e,"text",a)},expression:"item.text"}})],1):t._e(),t._v(" "),a("b-form-group",[a("b-input",{attrs:{type:"color"},model:{value:e.fill,callback:function(a){t.$set(e,"fill",a)},expression:"item.fill"}})],1)],1)}))],2)]),t._v(" "),a("div",{staticClass:"col-lg-9"},[a("div",{staticClass:"py-3"},[t.show?a("v-stage",{ref:"stage",attrs:{id:"stage",config:t.stageSize},on:{mousedown:t.handleStageMouseDown,touchstart:t.handleStageMouseDown}},[a("v-layer",{ref:"layer"},[t._l(t.stageSize.rectangles,(function(e){return a("v-"+e.shape,{key:e.id,tag:"component",attrs:{config:e},on:{dragend:t.handleDragEnd,transformend:t.handleTransformEnd}})})),t._v(" "),a("v-transformer",{ref:"transformer"})],2)],1):t._e()],1)])])])])}),[],!1,null,"acb2f83a",null);e.default=i.exports}}]);